<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/gateways/multitech/mlinux.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Configure mLinux model - The Things Network</title>
<meta property="og:title" content="Configure mLinux model" />
<meta name="description" content="Configure mLinux model mLinux is an open source embedded Linux distribution for the MultiConnect Conduit and is the next generation version of CoreCDP." />
<meta property="og:description" content="Configure mLinux model mLinux is an open source embedded Linux distribution for the MultiConnect Conduit and is the next generation version of CoreCDP." />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/gateways/multitech/mlinux.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/gateways/multitech/mlinux.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-05-02T14:02:47+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "Configure mLinux model",
"image": "https://www.thethingsnetwork.org/docs/assets/images/og-image.png",
"datePublished": "2017-05-02T14:02:47+00:00",
"description": "Configure mLinux model mLinux is an open source embedded Linux distribution for the MultiConnect Conduit and is the next generation version of CoreCDP.",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},
"url": "https://www.thethingsnetwork.org/docs/gateways/multitech/mlinux.html"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-152.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-144.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Building a Global Internet of Things Network Together.">
    <meta name="msapplication-config" content="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/ieconfig.xml">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-32.png" sizes="32x32">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-57.png" sizes="57x57">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-76.png" sizes="76x76">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-96.png" sizes="96x96">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-120.png" sizes="120x120">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-128.png" sizes="128x128">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-144.png" sizes="144x144">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-152.png" sizes="152x152">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-180.png" sizes="180x180">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-195.png" sizes="195x195">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-228.png" sizes="228x228">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/smalltile.png" sizes="128x128">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/mediumtile.png" sizes="270x270">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/widetile.png" sizes="558x270">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-196.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="content">
<div class="layout-page">
  <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div>
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/devices/">Devices</a></li>
                <li class="active"><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/gateways/multitech/mlinux.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>mlinux.md</strong></a>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <div class="panel page-side-nav page-affix">
          <div class="panel-body">
            <h5>Gateways</h5>
            <ul>
              <li class=""><a href="/docs/gateways/index.html">Overview</a>
            <ul>
                <li class=""><a href="/docs/gateways/registration.html">Gateway Registration</a>
                </li>
                <li class=""><a href="/docs/gateways/troubleshooting.html">Troubleshooting</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/gateways/gateway/">The Things Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/">MultiTech Conduit</a>
            <ul>
                <li class=""><a href="/docs/gateways/multitech/aep.html">Configure AEP model</a>
                </li>
                <li class="active"><a href="/docs/gateways/multitech/mlinux.html">Configure mLinux model</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/register.html">Register with TTN</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/next.html">What's next?</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/">Kerlink LoRa IoT Station</a>
                </li>
                <li class=""><a href="/docs/gateways/lorrier/">Lorrier LR2</a>
                </li>
            </ul>
            </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-sm-7">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="configure-mlinux-model">Configure mLinux model</h1>
<p>mLinux is an open source embedded Linux distribution for the MultiConnect Conduit and is the next generation version of CoreCDP.</p>
<h2 id="prepare-usb-stick">Prepare USB stick</h2>
<p>Find a USB stick and add the file <a href="https://github.com/kersing/multitech-installer/raw/master/installer.sh">installer.sh</a> to it.
<em>If the USB is not recognized by the Conduit, please check whether it is FAT or FAT32 formatted</em></p>
<h2 id="connect">Connect</h2>
<p>Wait to connect the power of the Conduit until we say so. ☝️</p>
<ol>
  <li>Remove the panel with the MultiTech logo from the front of the Conduit by remove the single screw to the left of the logo.</li>
  <li>Use a Micro-USB cable between the connector you just uncovered and your computer.</li>
  <li>Insert the USB stick to USB port on the back of the conduit.</li>
</ol>
<h3 id="windows">Windows</h3>
<p>Use Windows Device Manager to look up the <code class="highlighter-rouge">COM*</code> for the Conduit, identified by <code class="highlighter-rouge">* USB UART</code>:</p>
<p><img src="uart.png" alt="USB UART" /></p>
<p>Start PuTTY, set the <strong>Connection type</strong> to: <strong>Serial</strong>, enter the COM port you found and set the <strong>Speed</strong> to <code class="highlighter-rouge">115200</code>:</p>
<p><img src="putty-mlinux.png" alt="PuTTY Configuration" /></p>
<h3 id="mac-os--linux">Mac OS / Linux</h3>
<p>Run the following command in terminal to look up the USB connection:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>ls /dev/tty.usb<span class="k">*</span>
</code></pre>
</div>
<p>If that doesn’t work, try this instead and look for the value of <code class="highlighter-rouge">IOSerialCalloutDevice</code>.</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>ioreg -c IOSerialBSDClient  | grep usb
</code></pre>
</div>
<p>Now connect to the USB device using <code class="highlighter-rouge">115200</code> for speed. For example:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>screen /dev/cu.usbserial 115200
</code></pre>
</div>
<h2 id="login-via-terminal">Login via terminal</h2>
<p>Connect the Conduit’s power cable. You will now see its boot messages. Wait for the login prompt to appear:</p>
<p><img src="login-mlinux.png" alt="login" /></p>
<p>The default credentials are:</p>
<ul>
  <li><strong>Username</strong>: <code class="highlighter-rouge">root</code></li>
  <li><strong>Password</strong>: <code class="highlighter-rouge">root </code></li>
</ul>
<h2 id="copy-installer">Copy installer</h2>
<p>To get the installer we need mount the USB drive:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>mount /dev/sda1 /mnt
</code></pre>
</div>
<p>Copy the installer to the conduit:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>cp /mnt/installer<span class="k">*</span> /home/root
</code></pre>
</div>
<p>Tell Linux to release the USB drive:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>umount /mnt
</code></pre>
</div>
<blockquote>
  <p>During the download to the USB stick the <code class="highlighter-rouge">installer.sh</code> file might have been renamed to <code class="highlighter-rouge">installer.txt</code> or <code class="highlighter-rouge">installer.sh.txt</code>. If that happened, just use <code class="highlighter-rouge">installer.txt</code> or <code class="highlighter-rouge">installer.sh.txt</code> whenever the instructions say <code class="highlighter-rouge">installer.sh</code>.</p>
</blockquote>
<h2 id="network-setup">Network Setup</h2>
<p>Start the installer:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sh installer.sh
</code></pre>
</div>
<p>The installer will prompt you for information it requires to configure the Conduit:</p>
<ul>
  <li>A new password to secure access to the conduit.</li>
  <li>Your time zone.</li>
  <li>Network Setup.</li>
</ul>
<p><img src="installer-mlinux.png" alt="installer" /></p>
<p>Once it is done, hit the enter button to shutdown and wait for the led to stop blinking.</p>
<h2 id="reconnect">Reconnect</h2>
<p>Once the led has stopped blinking you can remove the power cable, USB drive, the Micro-USB cable and replace the front panel.</p>
<p>Now use an ethernet cable to connect the Conduit to the target network and reconnect the power cable. Wait for the conduit to finish booting (the heartbeat led starts blinking), connect a computer to the same network and login to the Conduit.</p>
<blockquote>
  <p>If you have not configured your Conduit with a static IP, you will have to <a href="http://apple.stackexchange.com/questions/19783/how-do-i-know-the-ip-addresses-of-other-computers-in-my-network">find out which IP the DHCP assigned to it</a>.
You can also find the IP address by reconnecting the Conduit with the Micro-USB Cable. Log in with your Username and Password and type <code class="highlighter-rouge">ifconfig</code>. Look for <code class="highlighter-rouge">eth0</code>. The number that comes after <code class="highlighter-rouge">inet addr</code> is the IP address.</p>
</blockquote>
<ul>
  <li>
    <p>For Windows use a terminal program like Putty to connect to <code class="highlighter-rouge">&lt;IP&gt;</code>:</p>
    <p><img src="putty-mlinux-ip.png" alt="PuTTY Configuration" /></p>
    <p>You will get a security alert concerning the host key. Accept the new key with <strong>Yes</strong>.</p>
    <p><img src="putty-warning.png" alt="PuTTY Security Alert" /></p>
  </li>
  <li>
    <p>For Linux/OSX open terminal and connect via <code class="highlighter-rouge">ssh &lt;IP&gt;</code>.</p>
  </li>
</ul>
<p>Login as user <code class="highlighter-rouge">root</code> with the password you set via the installer.</p>
<p><img src="login-root.png" alt="login as: root" /></p>
<h2 id="ttn-configuration-mlinux">TTN Configuration</h2>
<p>Now restart the installer and provide the required answers when prompted:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sh installer.sh
</code></pre>
</div>
<p><img src="installer-mlinux-2nd-no-gps.png" alt="installer" /></p>
<p>The installation is complete once the <code class="highlighter-rouge">Starting ttn-packet-forwarder: OK</code> message appears.</p>
<p>Check the output of the packet forwarder for any errors:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>tail /var/log/lora-pkt-fwd.log
</code></pre>
</div>
<p>The installation was successful if the output looks something like:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>##### 2016-08-06 23:19:11 GMT #####
### [UPSTREAM] ###
# RF packets received by concentrator: 1
# CRC_OK: 100.00%, CRC_FAIL: 0.00%, NO_CRC: 0.00%
# RF packets forwarded: 1 (19 bytes)
# PUSH_DATA datagrams sent: 2 (461 bytes)
# PUSH_DATA acknowledged: 100.00%
### [DOWNSTREAM] ###
# PULL_DATA sent: 3 (100.00% acknowledged)
# PULL_RESP(onse) datagrams received: 0 (0 bytes)
# RF packets sent to concentrator: 0 (0 bytes)
# TX errors: 0
##### END #####
INFO: [up] PUSH_ACK for server router.eu.thethings.network received in 13 ms
INFO: [down] for server router.eu.thethings.network PULL_ACK received in 13 ms
</code></pre>
</div>
          </div>
        </div>
      </div>
      <div class="hidden-xs col-sm-2">
        <div class="page-toc page-affix"></div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <script src="https://www.thethingsnetwork.org/navbar.js"></script>
    <script src="https://ttnstaticfile.blob.core.windows.net/static/common/js/ga.js"></script>
  </body>
</html>
