<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/gateways/kerlink/config.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Configuration | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Configuration" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Configuration Configuring packet forwarder To configure the gateway, you need to download either The Things Network’s packet forwarder (EU version) and produsb.zip from our Github. You can find at this link a debug version of the packet forwarder. With this debug version, the packet forwarder saves its logs on disk. You can access then access them by connecting to the Kerlink over serial or SSH, and by executing tail -f /mnt/fsuser-1/thethingsnetwork/poly_pkt_fwd.log. If you encounter unexpected behaviours, you can use the debug version to troubleshoot problems. However, we don’t recommend using it for extended periods of time or production settings. Indeed, since there is no log rotation mechanism, it can fill up the disk memory of the gateway. Follow this procedure to update or replace the packet forwarder: Copy produsb.sh (from extracting produsb.zip) and the dota_thethingsnetwork_&lt;version&gt;_EU.tar.gz onto an empty USB flash drive formatted in FAT-32. Make sure there is no .log file. Plug the USB flash drive into the gateway. Wait for 5 min. During this time the gateway will reboot itself. Unplug the key and check that a .log file has appeared. The file should contain WirmaV2 0x080XXXXX updated. This log file prevents any further installation on the gateways to avoid cyclic reboots. To redo the update on same gateway, remove this log file from the flash drive reinsert it into the gateway USB. This is not needed if you update another gateway. Connect with the Gateway SSH-Serial Logon to the gateway by using the SSH protocol, on a Mac or Linux system just use the Terminal and run ssh root@10.1.0.117 (substitute by the correct IP-address). On a Windows PC you can use Putty. Login with the user root and default password root (if using 2.x firmware) or pdmk-0 followed by the last 7 characters of the gateway serial number (if using 3.x firmware). Your are basically done now. For further checking continue to the next step. The following steps require some knowledge about how to use the command-line in Linux or Mac. WIRGRID The serial interface (linux console) of the gateway can also be accessed by using the WIRGRID debug tool. This tool connects to your PC by a USB (type B &gt; A) cable. Connect the WIRGRID tool to your gateway and PC Look up to which port the WIRGRID is assigned to Open a serial connection with the following settings: Baudrate: 115200 Data length: 8 Parity: none Stop bit: 1 Flow control: none When the connection opens up, log in with the following credentials Login: root Password: root (if using 2.x firmware) or pdmk-0 followed by the last 7 characters of the gateway serial number (if using 3.x firmware) On Linux you can connect to the debug console with the command screen /dev/tty.usbXXXX 115200 (where XXXX is the actual port). Gateway username and password Username: root Password: root For 3.1 firmware, the password is pdmk-0 followed by the last 7 characters of the serial Example: Wirnet_0b0e032d login: root Password: pdmk-0b0e032d Change root password It is highly recommanded to change the default root password. Use the following command to change the password: passwd Check if the Packet forwarder is running On the gateway Use the following command on the gateway to check whether data is being sent and received: tcpdump -AUq port 1700 The output must be somewhat similar to the following, check out if inbound as well as outbound traffic is shown: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes 10:40:51.571795 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 202 E.....@.@... .T4.L..“....*=.a.....K....{“rxpk”:[{“tmst”:214104396,“chan”:7,“rfch”:0,“freq”:867.900000,“stat”:1,“modu”:“LORA”,“datr”:“SF7BW125&quot;,“codr”:“4/5&quot;,“lsnr”:10.0,“rssi”:-67,“size”:19,“data”:“QJYnASYAMR4BWQCbBgrDXzkRoQ==“}]} 10:40:51.592416 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4 E.. ..@.4...4.L. .T...“.....a................@R.Y 10:40:52.646562 IP 10.10.1.84.55114 &gt; 52.169.76.203.1700: UDP, length 12 E..(..@.@... .T4.L..J....9%..@....K.... 10:40:52.666952 IP 52.169.76.203.1700 &gt; 10.10.1.84.55114: UDP, length 4 E.. .k@.4...4.L. .T...J..S...@................:lX 10:41:02.011529 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 113 E....“@.@..k .T4.L..“...y.c.......K....{“stat”:{“time”:“2017-04-24 08:41:02 GMT”,“rxnb”:7,“rxok”:6,“rxfw”:6,“ackr”:100.0,“dwnb”:0,“txnb”:0}} 10:41:02.032521 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4 E.. ..@.4...4.L. .T...“...)...................... The gateway does not automatically send data to auto include itself on the status pages of The Things Network. This will only happen after a network node has sent or is sending data via the gateway. Firewall configuration to enable downlink When using the wirnet_v3.1 firmware, the firewall is activated by default. This could disable the gateway from sending downlink. To solve this, we can simply disable the firewall: Open the file /etc/sysconfig/network Change FIREWALL=yes to FIREWALL=no reboot the gateway On the Console When the packet forwarder is running, it reports to the TTN network. The activity of all the gateways on the network can be checked in the Console. Troubleshooting If you still encounter problems with the packet forwarder, head to the Troubleshooting page of the packet forwarder." />
<meta property="og:description" content="Configuration Configuring packet forwarder To configure the gateway, you need to download either The Things Network’s packet forwarder (EU version) and produsb.zip from our Github. You can find at this link a debug version of the packet forwarder. With this debug version, the packet forwarder saves its logs on disk. You can access then access them by connecting to the Kerlink over serial or SSH, and by executing tail -f /mnt/fsuser-1/thethingsnetwork/poly_pkt_fwd.log. If you encounter unexpected behaviours, you can use the debug version to troubleshoot problems. However, we don’t recommend using it for extended periods of time or production settings. Indeed, since there is no log rotation mechanism, it can fill up the disk memory of the gateway. Follow this procedure to update or replace the packet forwarder: Copy produsb.sh (from extracting produsb.zip) and the dota_thethingsnetwork_&lt;version&gt;_EU.tar.gz onto an empty USB flash drive formatted in FAT-32. Make sure there is no .log file. Plug the USB flash drive into the gateway. Wait for 5 min. During this time the gateway will reboot itself. Unplug the key and check that a .log file has appeared. The file should contain WirmaV2 0x080XXXXX updated. This log file prevents any further installation on the gateways to avoid cyclic reboots. To redo the update on same gateway, remove this log file from the flash drive reinsert it into the gateway USB. This is not needed if you update another gateway. Connect with the Gateway SSH-Serial Logon to the gateway by using the SSH protocol, on a Mac or Linux system just use the Terminal and run ssh root@10.1.0.117 (substitute by the correct IP-address). On a Windows PC you can use Putty. Login with the user root and default password root (if using 2.x firmware) or pdmk-0 followed by the last 7 characters of the gateway serial number (if using 3.x firmware). Your are basically done now. For further checking continue to the next step. The following steps require some knowledge about how to use the command-line in Linux or Mac. WIRGRID The serial interface (linux console) of the gateway can also be accessed by using the WIRGRID debug tool. This tool connects to your PC by a USB (type B &gt; A) cable. Connect the WIRGRID tool to your gateway and PC Look up to which port the WIRGRID is assigned to Open a serial connection with the following settings: Baudrate: 115200 Data length: 8 Parity: none Stop bit: 1 Flow control: none When the connection opens up, log in with the following credentials Login: root Password: root (if using 2.x firmware) or pdmk-0 followed by the last 7 characters of the gateway serial number (if using 3.x firmware) On Linux you can connect to the debug console with the command screen /dev/tty.usbXXXX 115200 (where XXXX is the actual port). Gateway username and password Username: root Password: root For 3.1 firmware, the password is pdmk-0 followed by the last 7 characters of the serial Example: Wirnet_0b0e032d login: root Password: pdmk-0b0e032d Change root password It is highly recommanded to change the default root password. Use the following command to change the password: passwd Check if the Packet forwarder is running On the gateway Use the following command on the gateway to check whether data is being sent and received: tcpdump -AUq port 1700 The output must be somewhat similar to the following, check out if inbound as well as outbound traffic is shown: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes 10:40:51.571795 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 202 E.....@.@... .T4.L..“....*=.a.....K....{“rxpk”:[{“tmst”:214104396,“chan”:7,“rfch”:0,“freq”:867.900000,“stat”:1,“modu”:“LORA”,“datr”:“SF7BW125&quot;,“codr”:“4/5&quot;,“lsnr”:10.0,“rssi”:-67,“size”:19,“data”:“QJYnASYAMR4BWQCbBgrDXzkRoQ==“}]} 10:40:51.592416 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4 E.. ..@.4...4.L. .T...“.....a................@R.Y 10:40:52.646562 IP 10.10.1.84.55114 &gt; 52.169.76.203.1700: UDP, length 12 E..(..@.@... .T4.L..J....9%..@....K.... 10:40:52.666952 IP 52.169.76.203.1700 &gt; 10.10.1.84.55114: UDP, length 4 E.. .k@.4...4.L. .T...J..S...@................:lX 10:41:02.011529 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 113 E....“@.@..k .T4.L..“...y.c.......K....{“stat”:{“time”:“2017-04-24 08:41:02 GMT”,“rxnb”:7,“rxok”:6,“rxfw”:6,“ackr”:100.0,“dwnb”:0,“txnb”:0}} 10:41:02.032521 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4 E.. ..@.4...4.L. .T...“...)...................... The gateway does not automatically send data to auto include itself on the status pages of The Things Network. This will only happen after a network node has sent or is sending data via the gateway. Firewall configuration to enable downlink When using the wirnet_v3.1 firmware, the firewall is activated by default. This could disable the gateway from sending downlink. To solve this, we can simply disable the firewall: Open the file /etc/sysconfig/network Change FIREWALL=yes to FIREWALL=no reboot the gateway On the Console When the packet forwarder is running, it reports to the TTN network. The activity of all the gateways on the network can be checked in the Console. Troubleshooting If you still encounter problems with the packet forwarder, head to the Troubleshooting page of the packet forwarder." />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/gateways/kerlink/config.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/gateways/kerlink/config.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-02T10:19:29+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"description":"Configuration Configuring packet forwarder To configure the gateway, you need to download either The Things Network’s packet forwarder (EU version) and produsb.zip from our Github. You can find at this link a debug version of the packet forwarder. With this debug version, the packet forwarder saves its logs on disk. You can access then access them by connecting to the Kerlink over serial or SSH, and by executing tail -f /mnt/fsuser-1/thethingsnetwork/poly_pkt_fwd.log. If you encounter unexpected behaviours, you can use the debug version to troubleshoot problems. However, we don’t recommend using it for extended periods of time or production settings. Indeed, since there is no log rotation mechanism, it can fill up the disk memory of the gateway. Follow this procedure to update or replace the packet forwarder: Copy produsb.sh (from extracting produsb.zip) and the dota_thethingsnetwork_&lt;version&gt;_EU.tar.gz onto an empty USB flash drive formatted in FAT-32. Make sure there is no .log file. Plug the USB flash drive into the gateway. Wait for 5 min. During this time the gateway will reboot itself. Unplug the key and check that a .log file has appeared. The file should contain WirmaV2 0x080XXXXX updated. This log file prevents any further installation on the gateways to avoid cyclic reboots. To redo the update on same gateway, remove this log file from the flash drive reinsert it into the gateway USB. This is not needed if you update another gateway. Connect with the Gateway SSH-Serial Logon to the gateway by using the SSH protocol, on a Mac or Linux system just use the Terminal and run ssh root@10.1.0.117 (substitute by the correct IP-address). On a Windows PC you can use Putty. Login with the user root and default password root (if using 2.x firmware) or pdmk-0 followed by the last 7 characters of the gateway serial number (if using 3.x firmware). Your are basically done now. For further checking continue to the next step. The following steps require some knowledge about how to use the command-line in Linux or Mac. WIRGRID The serial interface (linux console) of the gateway can also be accessed by using the WIRGRID debug tool. This tool connects to your PC by a USB (type B &gt; A) cable. Connect the WIRGRID tool to your gateway and PC Look up to which port the WIRGRID is assigned to Open a serial connection with the following settings: Baudrate: 115200 Data length: 8 Parity: none Stop bit: 1 Flow control: none When the connection opens up, log in with the following credentials Login: root Password: root (if using 2.x firmware) or pdmk-0 followed by the last 7 characters of the gateway serial number (if using 3.x firmware) On Linux you can connect to the debug console with the command screen /dev/tty.usbXXXX 115200 (where XXXX is the actual port). Gateway username and password Username: root Password: root For 3.1 firmware, the password is pdmk-0 followed by the last 7 characters of the serial Example: Wirnet_0b0e032d login: root Password: pdmk-0b0e032d Change root password It is highly recommanded to change the default root password. Use the following command to change the password: passwd Check if the Packet forwarder is running On the gateway Use the following command on the gateway to check whether data is being sent and received: tcpdump -AUq port 1700 The output must be somewhat similar to the following, check out if inbound as well as outbound traffic is shown: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes 10:40:51.571795 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 202 E.....@.@... .T4.L..“....*=.a.....K....{“rxpk”:[{“tmst”:214104396,“chan”:7,“rfch”:0,“freq”:867.900000,“stat”:1,“modu”:“LORA”,“datr”:“SF7BW125&quot;,“codr”:“4/5&quot;,“lsnr”:10.0,“rssi”:-67,“size”:19,“data”:“QJYnASYAMR4BWQCbBgrDXzkRoQ==“}]} 10:40:51.592416 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4 E.. ..@.4...4.L. .T...“.....a................@R.Y 10:40:52.646562 IP 10.10.1.84.55114 &gt; 52.169.76.203.1700: UDP, length 12 E..(..@.@... .T4.L..J....9%..@....K.... 10:40:52.666952 IP 52.169.76.203.1700 &gt; 10.10.1.84.55114: UDP, length 4 E.. .k@.4...4.L. .T...J..S...@................:lX 10:41:02.011529 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 113 E....“@.@..k .T4.L..“...y.c.......K....{“stat”:{“time”:“2017-04-24 08:41:02 GMT”,“rxnb”:7,“rxok”:6,“rxfw”:6,“ackr”:100.0,“dwnb”:0,“txnb”:0}} 10:41:02.032521 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4 E.. ..@.4...4.L. .T...“...)...................... The gateway does not automatically send data to auto include itself on the status pages of The Things Network. This will only happen after a network node has sent or is sending data via the gateway. Firewall configuration to enable downlink When using the wirnet_v3.1 firmware, the firewall is activated by default. This could disable the gateway from sending downlink. To solve this, we can simply disable the firewall: Open the file /etc/sysconfig/network Change FIREWALL=yes to FIREWALL=no reboot the gateway On the Console When the packet forwarder is running, it reports to the TTN network. The activity of all the gateways on the network can be checked in the Console. Troubleshooting If you still encounter problems with the packet forwarder, head to the Troubleshooting page of the packet forwarder.","url":"https://www.thethingsnetwork.org/docs/gateways/kerlink/config.html","headline":"Configuration","dateModified":"2018-11-02T10:19:29+00:00","datePublished":"2018-11-02T10:19:29+00:00","@type":"BlogPosting","image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/gateways/kerlink/config.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div>
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class=""><a href="/docs/devices/">Devices</a></li>
                <li class="active"><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/gateways/kerlink/config.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>config.md</strong></a>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <div class="panel page-side-nav page-affix">
          <div class="panel-body">
            <h5>Gateways</h5>
            <ul>
              <li class=""><a href="/docs/gateways/index.html">Overview</a>
              </li>
            <li class="page-side-nav-section"><span>Running a gateway</span>
            <ul>
                <li class=""><a href="/docs/gateways/start/">Where to start</a>
                </li>
                <li class=""><a href="/docs/gateways/registration.html">Gateway Registration</a>
                </li>
                <li class=""><a href="/docs/gateways/packet-forwarder/">Packet Forwarders</a>
                </li>
                <li class=""><a href="/docs/gateways/lightning-protection.html">Lightning Protection</a>
                </li>
                <li class=""><a href="/docs/gateways/troubleshooting/">Troubleshooting</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/gateways/gateway/">The Things Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/multitech/">MultiTech Conduit</a>
                </li>
                <li class=""><a href="/docs/gateways/rak831/">RAK831</a>
                </li>
                <li class=""><a href="/docs/gateways/aaeon/">AAEON</a>
                </li>
                <li class=""><a href="/docs/gateways/cisco/">Cisco LoRaWAN Gateway</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/">Kerlink LoRa IoT Station</a>
            <ul>
                <li class=""><a href="/docs/gateways/kerlink/specs.html">Specifications</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/setup.html">Setup</a>
                </li>
                <li class="active"><a href="/docs/gateways/kerlink/config.html">Configuration</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/firmware-updates.html">Firmware Updates</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/cellular.html">Cellular Connection</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink/mount.html">Mount</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/gateways/kerlink-ibts/">Kerlink iBTS</a>
                </li>
                <li class=""><a href="/docs/gateways/kerlink-ifemtocell/">Kerlink iFemtoCell</a>
                </li>
                <li class=""><a href="/docs/gateways/laird/">Laird RG1xx</a>
                </li>
                <li class=""><a href="/docs/gateways/lorrier/">Lorrier LR2</a>
                </li>
            </ul>
            </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-sm-7">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="configuration">Configuration</h1>
<h2 id="configuring-packet-forwarder">Configuring packet forwarder</h2>
<p>To configure the gateway, you need to download either <a href="https://github.com/TheThingsNetwork/kerlink-station-firmware/blob/master/dota/dota_thethingsnetwork_v1.3_EU.tar.gz">The Things Network’s packet forwarder (EU version)</a> and <a href="https://github.com/TheThingsNetwork/kerlink-station-firmware/blob/master/dota/produsb.zip">produsb.zip</a> from our Github.</p>
<blockquote>
  <p>You can find <a href="https://github.com/TheThingsNetwork/kerlink-station-firmware/blob/master/dota/dota_thethingsnetwork_v1.4_EU.tar.gz">at this link</a> a debug version of the packet forwarder. With this debug version, the packet forwarder saves its logs on disk. You can access then access them by connecting to the Kerlink over serial or SSH, and by executing <code class="highlighter-rouge">tail -f /mnt/fsuser-1/thethingsnetwork/poly_pkt_fwd.log</code>.</p>
  <p>If you encounter unexpected behaviours, you can use the debug version to troubleshoot problems. However, we don’t recommend using it for extended periods of time or production settings. Indeed, since there is no log rotation mechanism, it can fill up the disk memory of the gateway.</p>
</blockquote>
<p>Follow this procedure to update or replace the packet forwarder:</p>
<ul>
  <li>Copy <code class="highlighter-rouge">produsb.sh</code> (from extracting <code class="highlighter-rouge">produsb.zip</code>) and the <code class="highlighter-rouge">dota_thethingsnetwork_&lt;version&gt;_EU.tar.gz</code> onto an empty USB flash drive formatted in FAT-32. Make sure there is no <code class="highlighter-rouge">.log</code> file.</li>
  <li>Plug the USB flash drive into the gateway.</li>
  <li>Wait for 5 min. During this time the gateway will reboot itself.</li>
  <li>Unplug the key and check that a <code class="highlighter-rouge">.log</code> file has appeared. The file should contain  <code class="highlighter-rouge">WirmaV2 0x080XXXXX updated</code>. This log file prevents any further installation on the gateways to avoid cyclic reboots.</li>
  <li>To redo the update on same gateway, remove this log file from the flash drive reinsert it into the gateway USB. This is not needed if you update another gateway.</li>
</ul>
<h2 id="connect-with-the-gateway">Connect with the Gateway</h2>
<h3 id="ssh-serial">SSH-Serial</h3>
<p>Logon to the gateway by using the SSH protocol, on a Mac or Linux system just use the Terminal and run <code class="highlighter-rouge">ssh root@10.1.0.117</code> (substitute by the correct IP-address). On a Windows PC you can use <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a>. Login with the user <code class="highlighter-rouge">root</code> and default password <code class="highlighter-rouge">root</code> (if using 2.x firmware) or <code class="highlighter-rouge">pdmk-0</code> followed by the last 7 characters of the gateway serial number (if using 3.x firmware).</p>
<p>Your are basically done now. For further checking continue to the next step. The following steps require some knowledge about how to use the command-line in Linux or Mac.</p>
<h3 id="wirgrid">WIRGRID</h3>
<p>The serial interface (linux console) of the gateway can also be accessed by using the WIRGRID debug tool. This tool connects to your PC by a USB (type B &gt; A) cable.</p>
<p><img src="config-wirgrid.jpg" alt="WIRGRID" /></p>
<ol>
  <li>Connect the WIRGRID tool to your gateway and PC</li>
  <li>Look up to which port the WIRGRID is assigned to</li>
  <li>Open a serial connection with the following settings:
    <ul>
      <li><strong>Baudrate:</strong> 115200</li>
      <li><strong>Data length:</strong> 8</li>
      <li><strong>Parity:</strong> none</li>
      <li><strong>Stop bit:</strong> 1</li>
      <li><strong>Flow control:</strong> none</li>
    </ul>
  </li>
  <li>When the connection opens up, log in with the following credentials
    <ul>
      <li><strong>Login:</strong> <code class="highlighter-rouge">root</code></li>
      <li><strong>Password:</strong> <code class="highlighter-rouge">root</code> (if using 2.x firmware) or <code class="highlighter-rouge">pdmk-0</code> followed by the last 7 characters of the gateway serial number (if using 3.x firmware)</li>
    </ul>
  </li>
</ol>
<p>On Linux you can connect to the debug console with the command <code class="highlighter-rouge">screen /dev/tty.usbXXXX 115200</code> (where XXXX is the actual port).</p>
<h3 id="gateway-username-and-password">Gateway username and password</h3>
<p>Username: <code class="highlighter-rouge">root</code><br />
Password: <code class="highlighter-rouge">root</code></p>
<p>For 3.1 firmware, the password is <code class="highlighter-rouge">pdmk-0</code> followed by the last 7 characters of the serial</p>
<p>Example:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Wirnet_0b0e032d login: root
Password: pdmk-0b0e032d
</code></pre>
</div>
<blockquote>
  <p><strong>Change root password</strong>
It is highly recommanded to change the default root password. Use the following command to change the password:
<code class="highlighter-rouge">passwd</code></p>
</blockquote>
<h2 id="check-if-the-packet-forwarder-is-running">Check if the Packet forwarder is running</h2>
<h3 id="on-the-gateway">On the gateway</h3>
<p>Use the following command on the gateway to check whether data is being sent and received:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>tcpdump -AUq port 1700
</code></pre>
</div>
<p>The output must be somewhat similar to the following, check out if inbound as well as outbound traffic is shown:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes
10:40:51.571795 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 202
E.....@.@...

.T4.L..“....*=.a.....K....{“rxpk”:[{“tmst”:214104396,“chan”:7,“rfch”:0,“freq”:867.900000,“stat”:1,“modu”:“LORA”,“datr”:“SF7BW125",“codr”:“4/5",“lsnr”:10.0,“rssi”:-67,“size”:19,“data”:“QJYnASYAMR4BWQCbBgrDXzkRoQ==“}]}
10:40:51.592416 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4
E.. ..@.4...4.L.

.T...“.....a................@R.Y
10:40:52.646562 IP 10.10.1.84.55114 &gt; 52.169.76.203.1700: UDP, length 12
E..(..@.@...

.T4.L..J....9%..@....K....
10:40:52.666952 IP 52.169.76.203.1700 &gt; 10.10.1.84.55114: UDP, length 4
E.. .k@.4...4.L.

.T...J..S...@................:lX
10:41:02.011529 IP 10.10.1.84.59170 &gt; 52.169.76.203.1700: UDP, length 113
E....“@.@..k

.T4.L..“...y.c.......K....{“stat”:{“time”:“2017-04-24 08:41:02 GMT”,“rxnb”:7,“rxok”:6,“rxfw”:6,“ackr”:100.0,“dwnb”:0,“txnb”:0}}
10:41:02.032521 IP 52.169.76.203.1700 &gt; 10.10.1.84.59170: UDP, length 4
E.. ..@.4...4.L.

.T...“...)......................
</code></pre>
</div>
<p>The gateway does not automatically send data to auto include itself on the status pages of The Things Network. This will only happen after a network node has sent or is sending data via the gateway.</p>
<h3 id="firewall-configuration-to-enable-downlink">Firewall configuration to enable downlink</h3>
<p>When using the wirnet_v3.1 firmware, the firewall is activated by default. This could disable the gateway from sending downlink. To solve this, we can simply disable the firewall:</p>
<ul>
  <li>Open the file <code class="highlighter-rouge">/etc/sysconfig/network</code></li>
  <li>Change <code class="highlighter-rouge">FIREWALL=yes</code> to <code class="highlighter-rouge">FIREWALL=no</code></li>
  <li>reboot the gateway</li>
</ul>
<h3 id="on-the-console">On the Console</h3>
<p>When the packet forwarder is running, it reports to the TTN network. The activity of all the gateways on the network can be checked in <a href="https://console.thethingsnetwork.org/gateways">the Console</a>.</p>
<h3 id="troubleshooting">Troubleshooting</h3>
<p>If you still encounter problems with the packet forwarder, head to the <a href="../../troubleshooting/semtech-udp.html">Troubleshooting page</a> of the packet forwarder.</p>
          </div>
        </div>
      </div>
      <div class="hidden-xs col-sm-2">
        <div class="page-toc page-affix"></div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
