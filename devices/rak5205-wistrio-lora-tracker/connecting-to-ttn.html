<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Connecting to The Things Network (TTN) | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Connecting to The Things Network (TTN)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Connecting to The Things Network (TTN)" />
<meta property="og:description" content="Connecting to The Things Network (TTN)" />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-11-12T08:54:05+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="twitter:title" content="Connecting to The Things Network (TTN)" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"description":"Connecting to The Things Network (TTN)","@type":"BlogPosting","headline":"Connecting to The Things Network (TTN)","dateModified":"2019-11-12T08:54:05+00:00","datePublished":"2019-11-12T08:54:05+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"url":"https://www.thethingsnetwork.org/docs/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.html"},"image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div>
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class="active"><a href="/docs/devices/">Devices</a></li>
                <li class=""><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>connecting-to-ttn.md</strong></a>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <div class="panel page-side-nav page-affix">
          <div class="panel-body">
            <ul>
              <li class=""><a href="/docs/devices/index.html"><h5>Devices</h5></a>
            <ul>
                <li class=""><a href="/docs/devices/registration.html">Device Registration</a>
                </li>
                <li class=""><a href="/docs/devices/bytes.html">Working with Bytes</a>
                </li>
                <li class=""><a href="/docs/devices/bestpractices.html">Best Practices</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>SDKs & Libraries</span>
            <ul>
                <li class=""><a href="/docs/devices/arduino/">Arduino</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/devices/uno/">The Things Uno</a>
                </li>
                <li class=""><a href="/docs/devices/rak5205-wistrio-lora-tracker/">RAK5205 WisTrio LoRa Tracker</a>
            <ul>
                <li class=""><a href="/docs/devices/rak5205-wistrio-lora-tracker/device-firmware-setup.html">Device Firmware Setup</a>
                </li>
                <li class=""><a href="/docs/devices/rak5205-wistrio-lora-tracker/device-firmware-upgrading.html">Device Firmware Upgrading</a>
                </li>
                <li class=""><a href="/docs/devices/rak5205-wistrio-lora-tracker/configuring-rak5205-at-commands.html">Configuring your RAK5205 Using AT Commands</a>
                </li>
                <li class="active"><a href="/docs/devices/rak5205-wistrio-lora-tracker/connecting-to-ttn.html">Connecting to The Things Network (TTN)</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/devices/rak7200-lora-tracker/">RAK7200 LoRa Tracker</a>
                </li>
                <li class=""><a href="/docs/devices/rak811-lora-module-breakout-board/">RAK811 WisDuo LoRa Module</a>
                </li>
                <li class=""><a href="/docs/devices/rak811-wisnode-lora-module/">RAK811 WisNode LoRa Module</a>
                </li>
                <li class=""><a href="/docs/devices/node/">The Things Node</a>
                </li>
                <li class=""><a href="/docs/devices/lopy/">LoPy</a>
                </li>
            </ul>
            </li>
            </ul>
            <!-- <li class="hidden-xs col-sm-2 page-toc page-affix"></li> --> 
          </div>
        </div> 
      </div>
      <div class="col-sm-7">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="connecting-to-the-things-network-ttn">Connecting to The Things Network (TTN)</h1>
<p>The Things Network is about enabling low power devices to be used in long range gateways that connect to an open-source, decentralized network and exchange data with Applications. Learn more about the Things Network <a href="https://www.thethingsnetwork.org/docs/"><strong>here</strong></a>. In this section, we’ll show how to connect the RAK5205 WisTrio Lora Tracker with TTN.</p>
<p><strong>1</strong>- First, connect the RAK5205 WisTrio LoRa Tracker to your PC and open the <strong>Serial Port Tool</strong>.</p>
<p><strong>2</strong>- <strong>Select</strong> the appropriate COM port and click <strong>open</strong> button (refer in the image below):</p>
<p><img src="images/rakk5205serialport.jpg" alt="Figure 1: RAK5205 Serial Port Tool" /></p>
<h3 id="registering-device">Registering Device</h3>
<blockquote>
  <p><strong>Note</strong> In this section, it is assumed that you have already successfully connected your RAK LoRa gateways with TTN. If not, refer to this <a href="https://doc.rakwireless.com/quick-start/rak7243c-pilot-gateway/connecting-to-the-things-network--ttn-https://doc.rakwireless.com/quick-start/rak7243c-pilot-gateway/connecting-to-the-things-network--ttn-"><strong>link</strong></a>.</p>
</blockquote>
<p><strong>3</strong>- Now go to the <a href="https://www.thethingsnetwork.org/"><strong>TTN Website</strong></a> and Log in.</p>
<p><img src="images/ttnwelcome.jpg" alt="Figure 2: The Things Network Homepage" /></p>
<p><strong>4</strong>- Choose “<strong>Console</strong>” located at the top right corner. Then, Click “<strong>Application</strong>”.</p>
<p><img src="images/ttnconsole.jpg" alt="Figure 3: TTN Console page" /></p>
<p><strong>5</strong>- Press the “<strong>add application</strong>” button.</p>
<p><img src="images/ttnaddapplication.jpg" alt="Figure 4: TTN Applications Page" /></p>
<p><strong>6</strong>- Create your own Application by filling in with correct contents.</p>
<blockquote>
  <p><strong>Note</strong> The Application ID is a unique combination of lower case, alphanumeric characters and nonconsecutive “-“ and “_”.</p>
</blockquote>
<p><img src="images/ttnaddapplicationpage.jpg" alt="Figure 5: TTN Applications Page" /></p>
<p><strong>7</strong>- Then press the “<strong>Add application</strong>” button at the bottom of this page, and you can see the following page:</p>
<p><img src="images/ttnapplicationinfo.jpg" alt="Figure 6: TTN Application Information Page" /></p>
<p><strong>8</strong>- At the middle of this page, you can find the box named “<strong>DEVICES</strong>” and click “<strong>register device</strong>”.</p>
<p><img src="images/ttnregisterdevice.jpg" alt="Figure 7: Registering Device in TTN" /></p>
<p><strong>9</strong>- Fill in the “<strong>Device ID</strong>” . Click the icon in the “<strong>Device EUI</strong>”, then a code is generated automatically.</p>
<ul>
  <li>You can get the “Device EUI” of your RAK5205 with the following command, which will display all node parameters:
    <div class="highlighter-rouge"><pre class="highlight"><code>at+get_config=lora:status
</code></pre>
    </div>
  </li>
  <li>In case you have had TTN generate a new “Device EUI” you can use the command below to import it into the RAK5205 configuration parameters (X is the Device_EUI you want to update):
    <div class="highlighter-rouge"><pre class="highlight"><code>at+set_config=lora:dev eui:XXXX
</code></pre>
    </div>
  </li>
</ul>
<p><img src="images/ttndeviceinfo.jpg" alt="Figure 8: Filling in the Device Information" /></p>
<p><img src="images/ttnregister.jpg" alt="Figure 9: Clicking Register Button" /></p>
<p><strong>10</strong>- Then press the “<strong>Register</strong>” button at the bottom of this page to finish.</p>
<p><img src="images/ttndeviceoverview.jpg" alt="Figure 10: Device Overview in TTN" /></p>
<p>Depending on which authentication method you want to use please proceed to either the <strong>OTAA mode</strong> or <strong>ABP mode</strong> section.</p>
<h3 id="otaa-mode">OTAA Mode</h3>
<p>According to The Things Network, <strong>Over-the-Air Activation (OTAA)</strong> is the preferred and most secure way to connect with The Things Network. Thus it is chosen as the default method when registering a device.</p>
<p>When setting up a new device in TTN it defaults to OTAA mode. For configuring it you need the following three parameters: <strong>Device EUI, Application EUI and App Key</strong>. You can get them all from the <strong>Overview page</strong>.</p>
<p><img src="images/ttnotaaparam.jpg" alt="Figure 10: Device OTAA Parameters" /></p>
<p>Now, let us configure the RAK5205 to work in OTAA mode in the EU868 band, as an example.</p>
<blockquote>
  <p><strong>Note</strong> The default LoRa working mode for the RAK5205 is LoRaWAN 1.0.2, while the default LoRa join mode is OTAA, and the default LoRa class is Class A.</p>
</blockquote>
<p><strong>1</strong>- Through your serial port tool, set mode to <strong>OTAA</strong> and LoRa device class to <strong>Class A</strong>, with the following set of commands:</p>
<p><img src="images/otaamodeclass.jpg" alt="Figure 11: Setting of LoRa Mode and Class" /></p>
<p><strong>2</strong>- Now that the modes are set, enter the parameters: : <strong>Frequency/Region to EU868, Device EUI, Application EUI</strong> and <strong>App Key</strong>. Use the commands below. Remember to replace the “<strong>XXXX</strong>” with the corresponding parameter value for your particular case:</p>
<p><img src="images/otaafreqdeveui.jpg" alt="Figure 12: Setting of Frequency and Device EUI" /></p>
<p><img src="images/otaaappeuiappkey.jpg" alt="Figure 13: Setting of App EUI and App Key" /></p>
<p><strong>3</strong>- Finally execute the join command:</p>
<p><img src="images/joinotaamode.jpg" alt="Figure 14: Joining OTAA Mode" /></p>
<p><strong>4</strong>- You can see that, once join successfully, RAK5205 will send sensor’s data in an interval loop automatically by default! You can see these data on TTN website as follow:</p>
<p><img src="images/otaadatatransmitted.jpg" alt="Figure 15: View Transmitted Data through TTN" /></p>
<p>Great! That’s all about OTAA mode.</p>
<h3 id="abp-mode">ABP Mode</h3>
<p><strong>Authentication By Personalisation (ABP)</strong> is a LoRaWAN activation mode that enables manual configuration of encryption keys on the device and is capable of sending frames to RAK gateways without needing a ‘handshake’ procedure in exchanging keys unlike OTAA.</p>
<p>This is a mode best used for testing environments.However, it is not recommended for production, as it is less secure. In this section, we will go through the steps in connecting to TTN using ABP mode.</p>
<p><strong>1</strong>- To start with, join the ABP mode by going to device settings then switch the activation method to ABP.</p>
<p><img src="images/ttnabpmode.jpg" alt="Figure 16: Switching the Activation Method to ABP" /></p>
<p><strong>2</strong>- The <strong>Device Address, Network Session Key</strong> and <strong>App Session Key</strong> will be generated automatically by default.</p>
<p><img src="images/ttnabpparam.jpg" alt="Figure 17: Setting the ABP Parameters" /></p>
<p><strong>3</strong>- Save the mode change and return to the <strong>Device Overview page</strong>. You can copy the keys by pressing the button after the value fields marked in red in the image below:</p>
<p><img src="images/ttnabpparamcode.jpg" alt="Figure 18: ABP Parameters' Codes" /></p>
<p><strong>4</strong>- Now we need to update the RAK5205 configuration (mode and parameters). Open the Serial Tool and type the command below to set this parameters: <strong>Activation Mode</strong> to <strong>ABP, Device Address, Network Session Key</strong> and App <strong>Session Key</strong>:</p>
<p><img src="images/ttnabpmodedevadd.jpg" alt="Figure 19: Setting of LoRa Mode and Device Address" /></p>
<p><img src="images/ttnabpnetworkappkey.jpg" alt="Figure 20: Setting of Network and Application Key" /></p>
<p><strong>5</strong>- Then, join in ABP mode.</p>
<p><img src="images/tnnabpjoin.jpg" alt="Figure 21: Joining in ABP Mode" /></p>
<ul>
  <li>As you see, RAK5205 has sent sensor’s data to TTN in ABP mode automatically by default, and TTN has received successfully:</li>
</ul>
<p><img src="images/tnnabpjoin.jpg" alt="Figure 22: Automatic Transmission of Message to TTN from RAK5205" /></p>
<p>Great! Your node should now work in ABP mode.</p>
<h3 id="optional-configurations">Optional Configurations</h3>
<p>You can also try other configurations which is supported in RAK5205 WisTrio LoRa Tracker. Click through the guides provided below to learn more. Enjoy!</p>
<ul>
  <li>Connecting to <a href="https://doc.rakwireless.com/rak5205-wistrio-lora-tracker/connecting-to-loraserver">LoRaServer</a></li>
  <li>LoRa <a href="https://doc.rakwireless.com/rak5205-wistrio-lora-tracker/lora-p2p-mode">P2P Mode</a></li>
  <li><a href="https://doc.rakwireless.com/rak5205-wistrio-lora-tracker/analyzing-the-data-from-rak5205">RAK525 Data Analyzing</a></li>
  <li><a href="https://doc.rakwireless.com/rak5205-wistrio-lora-tracker/cayenne-integration">Cayenne Integration</a></li>
</ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
