<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/devices/rak7200-lora-tracker/connecting-to-ttn.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Connecting to The Things Network (TTN) | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Connecting to The Things Network (TTN)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Connecting to The Things Network (TTN)" />
<meta property="og:description" content="Connecting to The Things Network (TTN)" />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/devices/rak7200-lora-tracker/connecting-to-ttn.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/devices/rak7200-lora-tracker/connecting-to-ttn.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-11-28T14:58:55+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="twitter:title" content="Connecting to The Things Network (TTN)" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"description":"Connecting to The Things Network (TTN)","@type":"BlogPosting","headline":"Connecting to The Things Network (TTN)","dateModified":"2019-11-28T14:58:55+00:00","datePublished":"2019-11-28T14:58:55+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"url":"https://www.thethingsnetwork.org/docs/devices/rak7200-lora-tracker/connecting-to-ttn.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/devices/rak7200-lora-tracker/connecting-to-ttn.html"},"image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <!-- <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div> -->
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class="active"><a href="/docs/devices/">Devices</a></li>
                <li class=""><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/devices/rak7200-lora-tracker/connecting-to-ttn.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>connecting-to-ttn.md</strong></a>
      </div>
    </div>
    <div class="row wrapper">
      <div class="col-sm-3 side-nav">
        <div class="panel page-side-nav">
          <div class="panel-body">
            <ul>
              <li class=""><a href="/docs/devices/index.html"><h5>Devices</h5></a>
            <ul>
                <li class=""><a href="/docs/devices/registration.html">Device Registration</a>
                </li>
                <li class=""><a href="/docs/devices/bytes.html">Working with Bytes</a>
                </li>
                <li class=""><a href="/docs/devices/bestpractices.html">Best Practices</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>SDKs & Libraries</span>
            <ul>
                <li class=""><a href="/docs/devices/arduino/">Arduino</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/devices/uno/">The Things Uno</a>
                </li>
                <li class=""><a href="/docs/devices/rak5205-wistrio-lora-tracker/">RAK5205 WisTrio LoRa Tracker</a>
                </li>
                <li class=""><a href="/docs/devices/rak7200-lora-tracker/">RAK7200 LoRa Tracker</a>
            <ul>
                <li class=""><a href="/docs/devices/rak7200-lora-tracker/device-firmware-setup.html">Device Firmware Setup</a>
                </li>
                <li class=""><a href="/docs/devices/rak7200-lora-tracker/device-firmware-upgrading.html">Device Firmware Upgrading</a>
                </li>
                <li class=""><a href="/docs/devices/rak7200-lora-tracker/configuring-rak7200-at-commands.html">Configuring your RAK7200 Using AT Commands</a>
                </li>
                <li class="active"><a href="/docs/devices/rak7200-lora-tracker/connecting-to-ttn.html">Connecting to The Things Network (TTN)</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/devices/rak811-lora-module-breakout-board/">RAK811 WisDuo LoRa Module</a>
                </li>
                <li class=""><a href="/docs/devices/rak811-wisnode-lora-module/">RAK811 WisNode LoRa Module</a>
                </li>
                <li class=""><a href="/docs/devices/node/">The Things Node</a>
                </li>
                <li class=""><a href="/docs/devices/lopy/">LoPy</a>
                </li>
            </ul>
            </li>
            </ul>
            <!-- <li class="hidden-xs col-sm-2 page-toc page-affix"></li> --> 
          </div>
        </div> 
      </div>
      <div class="col-sm-9 page-body">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="connecting-to-the-things-network-ttn">Connecting to The Things Network (TTN)</h1>
<p>In this section, we will be connecting the RAK7200 LoRa Tracker to The Things Network (TTN). If you don’t have an account yet, head on to [<strong>The Things Network</strong>] (https://www.thethingsnetwork.org/) website and create one. Once done, Log in to your account and go to the console which can be found here:</p>
<p><img src="images/ttnwelcome.jpg" alt="Figure 1: The Things Network Home Page" /></p>
<h3 id="adding-application">Adding Application</h3>
<p><strong>1</strong>- Upon logging-in, choose <strong>Application</strong> and click “<strong>add application</strong>” as shown in the image below:</p>
<p><img src="images/addapplication.jpg" alt="Figure 2: Application Page" /></p>
<p><strong>2</strong>- You should see a new window which asks for device credentials as seen in the image below. Fill in with the details with individual guides as follows:</p>
<ul>
  <li><strong>Application ID</strong> - this will be the unique id of your application in the Network. Please note that characters should be in lower case, no spaces are allowed.</li>
  <li><strong>Description</strong> - this is a short and concise human readable description of your application.</li>
  <li><strong>Application EUI</strong> - this will be generated automatically by The Things Network for convenience.</li>
  <li><strong>Handler Registration</strong> - handler you want to register this application to.</li>
</ul>
<p><img src="images/applicationdetails.jpg" alt="Figure 3: Adding an Application" /></p>
<p><strong>3</strong>- After you fill in the necessary information, press the “Add application” button at the bottom of this page. If you see the following page, this means that you have successfully registered your application.</p>
<p><img src="images/applicationoverview.jpg" alt="Figure 4: Application Overview" /></p>
<h3 id="registering-device">Registering Device</h3>
<p><strong>1</strong>- Scroll down until you see the Devices section, or you can also click the “<strong>Devices</strong>” button at the top. Then, click “<strong>register device</strong>”.</p>
<p><img src="images/registerdevice.jpg" alt="Figure 5: Device Section" /></p>
<p><strong>2</strong>- Fill-in the necessary details for the registration in the sample form in the image below together with the guide in each of the parameter needed.</p>
<p><img src="images/addingdevice.jpg" alt="Figure 6: Add your Device" /></p>
<p>Here are the things that you should take note in registering your device:</p>
<ul>
  <li><strong>Device ID</strong> - this is the unique identifier for your RAK7200 LoRa Tracker in your application. You need to enter this manually.</li>
  <li><strong>Device EUI</strong> - this is the unique identifier for your device in the network. You can change it later, if you want.
    <blockquote>
      <p><strong>Note:</strong> Click the following icon and the Device EUI will be automatically generated. The App Key should be in auto generation mode by default.</p>
    </blockquote>
  </li>
</ul>
<p><strong>3</strong>- Lastly, click the Register button. Now, your device is registered under the corresponding application.</p>
<p><img src="images/deviceoverview.jpg" alt="Figure 7: Device Overview" /></p>
<h3 id="otaa-mode">OTAA Mode</h3>
<p>According to The Things Network, <strong>Over-the-Air Activation (OTAA)</strong> is the preferred and most secure way to connect with The Things Network. Thus it is chosen as the default method when registering a device.</p>
<p><img src="images/ttn-otaa.jpg" alt="Figure 8: TTN OTAA Mode" /></p>
<p><strong>1</strong>- Take note of the <strong>Device EUI</strong>, <strong>Application EUI</strong> and the <strong>App Key</strong></p>
<p><img src="images/otaa-param.jpg" alt="Figure 9: TTN OTAA Parameters" /></p>
<blockquote>
  <p><strong>Note:</strong>Make sure your LoRa Tracker is still Connected to the RAK Serial Port Tool.</p>
</blockquote>
<p><strong>2</strong>- Now, let’s join in OTAA Mode and set your device to AU915 Frequency for example. The default LoRa work mode is LoRaWAN 1.0.2, the default LoRa join mode is OTAA, and the default LoRa class is Class A. For the full list of AT Commands <a href="/quick-start/rak7200-lora-tracker/configuring-the-rak7200-lora-tracker-using-at-commands"><strong>here</strong></a>.</p>
<ul>
  <li>at+set_config=lora:join_mode:0 - set the join mode in OTAA.</li>
  <li>at+set_config=lora:class:0 -set the LoRa Class to Class A.</li>
  <li>at+set_config=lora:region:AU915 -this will set the frequency band to the 915Mhz for the AU region, you need to enter the corresponding frequency band for your location ( Check the corresponding frequency plan by country <a href="https://www.thethingsnetwork.org/docs/lorawan/frequencies-by-country.html"><strong>here</strong></a>.</li>
</ul>
<p><img src="images/otaaclassfreq.jpg" alt="Figure 10: TTN OTAA Class and Frequency" /></p>
<p><strong>3</strong>- After , we need to set the Device EUI, Application EUI and the Application Key to our RAK7200. To do this, enter the following commands:</p>
<ul>
  <li>at+set_config=lora:dev_eui:XXX- where XXX is your Device EUI copied from TTN.</li>
  <li>at+set_config=lora:app_eui:XXX- where XXX is your Application EUI copied from TTN.</li>
</ul>
<p><img src="images/otaadevapp.jpg" alt="Figure 11: TTN OTAA Device and App EUI" /></p>
<p>** at+set_config=lora:app_key:XXX - where XXX is your Application Key copied from TTN.</p>
<p><img src="images/otaaappkey.jpg" alt="Figure 12: TTN OTAA App Key" /></p>
<p><strong>4</strong>- This will perform OTAA (Over the air activation) and authenticate the node with TTN. It should now be registered and you can send and receive data. Finally reset the node via the Reset button. If there are no issues you should see a the following information in the Receiving window:</p>
<p><img src="images/otaasuccess.jpg" alt="Figure 13: TTN OTAA Success" /></p>
<p><strong>5</strong>- Go to the Device Overview in the TTN and you can see that the status is now Green (Online). Now your RAK7200 is transmitting sensor data to TTN. You can see it in its raw form in TTN, by going to the Data tab:</p>
<p><img src="images/ttnotaadata.jpg" alt="Figure 14: TTN OTAA Data" /></p>
<h3 id="abp-mode">ABP Mode</h3>
<p><strong>1</strong>- To join the ABP mode, go to device settings and switch the activation method to ABP.</p>
<p><strong>2</strong>- The Device Address, Network Session Key and App Session Key will be generated automatically by default.</p>
<p><img src="images/ttnabp.jpg" alt="Figure 15: TTN ABP" /></p>
<p><strong>3</strong>- Save the mode change and return to the Device Overview page. You can copy the keys by pressing the button after the value fields marked red below:</p>
<p><img src="images/ttnabpparam.jpg" alt="Figure 16: TTN ABP Parameters" /></p>
<p><strong>4</strong>- Now we need to update the RAK7200 configuration (mode and parameters). Open the Serial Tool and type the command below to change the region (in case you have not done so already):</p>
<div class="highlighter-rouge"><pre class="highlight"><code>at+set_config=lora:region:EU868
</code></pre>
</div>
<p>As you can see in Figure 3, as we were in the same region (EU868), there was no change.</p>
<p><img src="images/abpregion.jpg" alt="Figure 17: TTN ABP Region Setup" /></p>
<p><strong>5</strong>- Change the mode to ABP with the command:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>at+set_config=lora:join_mode:1
</code></pre>
</div>
<p><img src="images/abpjoinmode.jpg" alt="Figure 18: TTN ABP Join Mode Setup" /></p>
<p><strong>6</strong>- Now that the mode has been changed, enter the parameters: Device Address, Network Session Key, and Application Session Key. Use the commands below. Remember to replace the “X” with the corresponding parameter value for your particular case.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>at+set_config=lora:dev_addr:X
at+set_config=lora:nwks_key:X
at+set_config=lora:apps_key:X
</code></pre>
</div>
<p><img src="images/rak7200abpparam.jpg" alt="Figure 19: RAK7200 ABP Parameters" /></p>
<p><strong>7</strong>- Finally execute the join command:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>at+join
</code></pre>
</div>
<p><img src="images/ttabpjoin.jpg" alt="Figure 20: TTN ABP Join Command" /></p>
<p><strong>8</strong>- You can test the connection by sending an uplink frame. Use the following for example:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>at+send=lora:1:12345678
</code></pre>
</div>
<p><img src="images/abptestsendfram.jpg" alt="Figure 21: TTN ABP Send Sample Frame" /></p>
<p>If you get a response in your TTN live data feed as in the image below, then you are all set!</p>
<p><img src="images/ttnabpdataview.jpg" alt="Figure 22: TTN ABP Data Sample View" /></p>
<h3 id="optional-configurations">Optional Configurations</h3>
<p>You can also try other configurations which is supported in RAK7200 LoRa Tracker. Click through the guides provided below to learn more. Enjoy!</p>
<ul>
  <li>Connecting to <a href="https://doc.rakwireless.com/rak7200-lora-tracker/connect-to-loraserver">LoRaServer</a></li>
  <li><a href="https://doc.rakwireless.com/rak7200-lora-tracker/analyzing-the-data-from-rak7200">RAK7200 Data Analyzing</a></li>
</ul>
          </div>  
        </div>
        <div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
