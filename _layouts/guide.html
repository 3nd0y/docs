---
layout: default
---

{% capture version %}{{ page.url | split: '/' | slice: 1 }}{% endcapture %}
{% capture path %}{{ page.url | split: '/' | slice: 2, 10 | join: '/' }}{% endcapture %}
{% assign guide_versions = '' | split: '|' %}

{% for guide in site.includes %}
  {% capture guide_version %}{{ guide.url | split: '/' | slice: 1 }}{% endcapture %}
  {% capture guide_path %}{{ guide.url | split: '/' | slice: 2, 10 | join: '/' }}{% endcapture %}
  {% if guide_path == path or page.aliases contains guide_path or guide.aliases contains path %}
    {% assign guide_versions = guide_versions | push: guide %}
    {% if guide_version == "current" %}
      {% assign current = guide %}
    {% endif %}
  {% endif %}
{% endfor %}

<div id="top" class="layout-guide container">

  <div class="row guide-nav">
    <div class="col-sm-9">
      <ol class="breadcrumb">
        <li><a href="http://www.thethingsnetwork.org/">Home</a></li>
        <li><a href="{{ site.baseurl }}/">Learn</a></li>
        <li class="dropdown"><a href id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ page.title }} <span class="caret"></span></a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            {% for category in site.data.guides %}
              <li class="dropdown-header">{{ category.category | upcase }}</li>
              {% for guide in category.guides %}
                {% if guide.href %}
                  <li><a href="{{ guide.href }}">
                {% else if guide.path %}
                  <li{% if guide.path == page.path %} class="active"{% endif %}><a href="{{ site.baseurl }}{{ guide.path }}">
                {% else %}
                  <li class="disabled"><a href="#">
                {% endif %}
                {{ guide.name }}
                {% if guide.label %}<span class="label label-info">{{ guide.label }}</span>{% endif %}
                </a></li>
              {% endfor %}
            {% endfor %}
          </ul>
        </li>
      </ol>
    </div>
    <div class="col-sm-3 text-right">
      <a class="btn btn-default hidden-xs" href="{{ site.github.repository_url }}/edit/master/{{ page.path | downcase }}" target="_blank"><i class="fa fa-pencil"></i> Improve this guide</a>
    </div>
  </div>

  <div class="row">

    <div class="col-md-3" role="complementary">

      <div class="guide-sidebar">

        <div class="js-toc hidden-xs hidden-sm"></div>

        <p class="guide-top"><a href="#top">Back to top</a></p>

      </div>

    </div>

    <div class="col-md-9 js-toc-content content-body" role="main">

      {% if version != 'current' %}
        <div class="alert alert-warning"><strong>Attention:</strong> You are reading the <small>{{ version | upcase }}</small> {% if current %}and not the <small><a href="{{ site.baseurl | append: current.url }}">CURRENT</a></small>{% endif %} version of this guide. {% if version == 'v2-preview' %} The UI and APIs might change and registered applications and devices might be deleted at any moment!{% endif %}</div>
      {% endif %}

      {% assign replace_a_with = '<a href="' | append: site.baseurl | append: '/' | append: version | append: '/' %}
      {% assign replace_img_with = '<img src="' | append: site.baseurl | append: '/' | append: version | append: '/' %}

      <section class="panel">
        <div class="panel-body">
          <span class="label label-success pull-right">{% if version == "current" %}CURRENT: {{ site.var.current | upcase }}{% else %}{{ version | upcase }}{% endif %}</span>
          <h1>{{page.title}}</h1>
          {{ content | replace: '<a href="/', replace_a_with | replace: '<img src="/', replace_img_with | replace: '<table>', '<table class="table">' }}
        </div>
        {% if guide_versions.size > 1 %}
          <div class="panel-footer">
            Versions:&nbsp;&nbsp;&nbsp; 
            {% if current %}
              <a href="{{ site.baseurl | append: current.url }}" class="label label-{% if page.url == current.url %}success{% else %}default{% endif %}">CURRENT: {{ site.var.current | upcase }}</a>
            {% endif %}
            {% for guide in guide_versions %}
              {% capture guide_version %}{{ guide.url | split: '/' | slice: 1 }}{% endcapture %}
              {% unless guide_version == "current" %}
                <a href="{{ site.baseurl | append: guide.url }}" class="label label-{% if page.url == guide.url %}success{% else %}default{% endif %}">{{ guide.url | split: '/' | slice: 1 | first | upcase }}</a>
              {% endunless %}
            {% endfor %}
          </div>
        {% endif %}
      </section>

      {% if page.ambassador %}
        <section class="panel panel-inverse ambassador">
          <div class="panel-body">
            <div class="media">
              <div class="media-left">
                <a href="https://www.thethingsnetwork.org/u/{{ page.ambassador.username }}/"><img src="https://account.thethingsnetwork.org/api/users/{{ page.ambassador.username }}/picture.jpg" alt="{{ page.ambassador.name }}" class="img-circle" /></a>
              </div>
              <div class="media-body">
                {% if page.ambassador.text %}
                  {{ page.ambassador.text | markdownify }}
                {% else %}
                  This guide is maintained by our ambassador <a href="{{ page.ambassador.url }}" target="_blank">{{ page.ambassador.name }}</a>.
                {% endif %}
                <p><small>Become an ambassador and help us support a new device or integration! <a href="mailto:fokke@thethingsnetwork.org">Drop us a line!</a></small></p>
              </div>
            </div>
          </div>
        </section>
      {% endif %}

      {% for section in page.sections %}
        {% assign section0 = section | split: '' | first %}
        {% capture section_include %}{% if section0 == '/' %}{% include {{ section }} %}{% else %}{% include_relative {{ section }} %}{% endif %}{% endcapture %}
        <section class="panel">
          <div class="panel-body">
            {{ section_include | markdownify | replace: '<a href="/', replace_a_with | replace: '<img src="/', replace_img_with | replace: '<table>', '<table class="table">'}}
          </div>
        </section>
      {% endfor %}

    </div>

  </div>
</div>
