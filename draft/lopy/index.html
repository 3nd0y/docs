<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- 20111122 0939 -->

    <link rel="stylesheet" href="/docs/assets/css/main.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>

    var site = {
      baseurl: '/docs',
      local: (document.location.port || document.location.protocol === 'file:')
    };

    (function(canonical) {
      if (!site.local && document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/draft/lopy/');

    </script>

    <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>LoPy - The Things Network</title>
<meta property="og:title" content="LoPy" />
<meta name="description" content="With LoRa, Wifi and BLE, the the LoPy is the only triple bearer MicroPython enabled micro controller on the market today – the perfect enterprise grade IoT platform for your connected Things." />
<meta property="og:description" content="With LoRa, Wifi and BLE, the the LoPy is the only triple bearer MicroPython enabled micro controller on the market today – the perfect enterprise grade IoT platform for your connected Things." />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/draft/lopy/" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/draft/lopy/" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/the-things-white.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-12-08T09:46:30+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "LoPy",
"image": "https://www.thethingsnetwork.org/docs/assets/images/the-things-white.png",
"datePublished": "2016-12-08T09:46:30+00:00",
"description": "With LoRa, Wifi and BLE, the the LoPy is the only triple bearer MicroPython enabled micro controller on the market today – the perfect enterprise grade IoT platform for your connected Things.",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "https://www.thethingsnetwork.org/docs/assets/images/the-things-white.png"}},
"url": "https://www.thethingsnetwork.org/docs/draft/lopy/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="apple-touch-icon-precomposed" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-152.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-144.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Building a Global Internet of Things Network Together.">
    <meta name="msapplication-config" content="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/ieconfig.xml">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-32.png" sizes="32x32">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-57.png" sizes="57x57">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-76.png" sizes="76x76">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-96.png" sizes="96x96">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-120.png" sizes="120x120">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-128.png" sizes="128x128">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-144.png" sizes="144x144">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-152.png" sizes="152x152">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-180.png" sizes="180x180">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-195.png" sizes="195x195">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-228.png" sizes="228x228">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/smalltile.png" sizes="128x128">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/mediumtile.png" sizes="270x270">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/widetile.png" sizes="558x270">
    <link rel="icon" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnstaticfile.blob.core.windows.net/static/common/favicon/favicon-196.png">
      
  </head>
  <body>

    <div id="content">
      










<div id="top" class="layout-guide container">

  <div class="row guide-nav">
    <div class="col-sm-9">
      <ol class="breadcrumb">
        <li><a href="http://www.thethingsnetwork.org/">Home</a></li>
        <li><a href="/docs/">Learn</a></li>
        
        <li class="active">LoPy</li>
      </ol>
    </div>
    <div class="col-sm-3 text-right">
      <a class="btn btn-default hidden-xs" href="http://github.com/TheThingsNetwork/docs/edit/master/_includes/draft/lopy.md" target="_blank"><i class="fa fa-pencil"></i> Improve this guide</a>
    </div>
  </div>

  <div class="row">

    <div class="col-md-3" role="complementary">

      <div class="guide-switch btn-group btn-block">
        <button type="button" class="btn btn-primary btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Guides <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          
            
            
              
                <li class="disabled"><a href="#">
              
              The Things Node
              
              </a></li>
            
              
                <li><a href="/docs/current/uno/">
              
              The Things Uno
              
              </a></li>
            
              
                <li><a href="/docs/current/arduino/">
              
              Arduino
              <span class="label label-info">SDK</span>
              </a></li>
            
              
                <li class="disabled"><a href="#">
              
              Other Devices
              
              </a></li>
            
          
            <li role="separator" class="divider"></li>
            
              
                <li class="disabled"><a href="#">
              
              The Things Gateway
              
              </a></li>
            
              
                <li><a href="/docs/current/multitech/">
              
              MultiTech Conduit
              
              </a></li>
            
              
                <li><a href="/docs/current/lorrier/">
              
              Lorrier LR2
              
              </a></li>
            
              
                <li class="disabled"><a href="#">
              
              Other Gateways
              
              </a></li>
            
          
            <li role="separator" class="divider"></li>
            
              
                <li><a href="/docs/current/dashboard/">
              
              The Things Dashboard
              
              </a></li>
            
              
                <li><a href="/docs/current/cli/">
              
              The Things CLI
              
              </a></li>
            
              
                <li><a href="https://www.thethingsnetwork.org/wiki/Backend/Overview">
              
              Architecture
              
              </a></li>
            
          
            <li role="separator" class="divider"></li>
            
              
                <li><a href="/docs/current/mqtt/">
              
              MQTT
              <span class="label label-info">API</span>
              </a></li>
            
              
                <li><a href="/docs/current/node-js/">
              
              Node.js
              <span class="label label-info">SDK</span>
              </a></li>
            
              
                <li><a href="/docs/current/node-red/">
              
              Node-RED
              <span class="label label-info">SDK</span>
              </a></li>
            
              
                <li><a href="/docs/v2-preview/java/">
              
              Java
              <span class="label label-info">SDK</span>
              </a></li>
            
              
                <li class="disabled"><a href="#">
              
              Other Platforms
              
              </a></li>
            
          
        </ul>
      </div>

      <div class="guide-sidebar hidden-xs hidden-sm">

        <div class="js-toc"></div>

        <p class="guide-top"><a href="#top">Back to top</a></p>

      </div>

    </div>

    <div class="col-md-9 js-toc-content content-body" role="main">

      
        <div class="alert alert-warning"><strong>Attention:</strong> You are reading the <small>DRAFT</small>  version of this guide. </div>
      

      
      

      <section class="panel">
        <div class="panel-body">
          <span class="label label-success pull-right">DRAFT</span>
          <h1>LoPy</h1>
          <p>With LoRa, Wifi and BLE, the the <a href="https://www.pycom.io/solutions/py-boards/lopy/">LoPy</a> is the only triple bearer MicroPython enabled micro controller on the market today – the perfect enterprise grade IoT platform for your connected Things.</p>

<p>This guide will walk you through using The Things Network on the LoPy as node.</p>

<blockquote>
  <p>The LoPy can also function as a single-channel gateway, but The Things Network discourages the use of single-channel gateways. Use a multi-gateway instead.</p>
</blockquote>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>
    <p><a href="https://www.pycom.io/product/lopy/">LoPy</a>, upgraded to the latest firmware.</p>

    <p>Follow Pycom’s <a href="https://www.pycom.io/gettingstarted/">Getting Started</a> to <a href="https://docs.pycom.io/lopy/lopy/general.html#upgrading-with-the-lopy-updater-stand-alone-tool">upgrade</a> the <a href="https://www.pycom.io/support/supportdownloads/">firmware</a> and connect to the LoPy.</p>

    <blockquote>
      <p>Be aware that you need a male-to-male wire to boot into safe mode.</p>
    </blockquote>
  </li>
  <li>
    <p><a href="https://www.pycom.io/product/lora-antenna-kit/">Antenna</a>.</p>

    <blockquote>
      <p>Using the LoPy without an external antenna might damage it. The connector for the LoRa antenna the one on the side with the button and LED (white square).</p>
    </blockquote>
  </li>
  <li>
    <p><a href="https://www.pycom.io/product/expansion-board/">Expansion Board</a>.</p>

    <blockquote>
      <p>Mount the LoPy with the LED (white square) <a href="https://docs.pycom.io/lopy/lopy/tutorial/intro.html#plugging-into-the-expansion-board-and-powering-on">positioned on the same side</a> as the Micro-USB connector of the expansion board.</p>
    </blockquote>
  </li>
</ul>

<p><strong>Bonus:</strong> If you use the case, guide the pigtail coming from the LoPy between the LoPy and the row of pins. It should then bent back to the antenna in a way that it doesn’t hide the pin labels from you once you close the case.</p>

        </div>
        
      </section>

      
        <section class="panel panel-inverse ambassador">
          <div class="panel-body">
            <div class="media">
              <div class="media-left">
                <a href="https://www.thethingsnetwork.org/u/Batilan/"><img src="https://account.thethingsnetwork.org/api/users/Batilan/picture.jpg" alt="Corné	van Strien" class="img-circle" /></a>
              </div>
              <div class="media-body">
                
                  This guide is maintained by our ambassador <a href="https://www.thethingsnetwork.org/u/Batilan" target="_blank">Corné	van Strien</a>.
                
                <p><small>Become an ambassador and help us support more devices! <a href="mailto:fokke@thethingsnetwork.org">Drop us a line!</a></small></p>
              </div>
            </div>
          </div>
        </section>
      

      
        
        
        <section class="panel">
          <div class="panel-body">
            <h1 id="usage">Usage</h1>
<p>This is how you perform common tasks to use The Things Network on the LoPy. This assumes you are familiar with <a href="https://docs.pycom.io/lopy/">MicroPython for LoPy</a> documentation.</p>

<h2 id="register-your-device-eui">Register your Device EUI</h2>

<p>To <a href="../../v2-preview/console/#register-device">register</a> your device to a The Things Network application, you will need a unique Device EUI. You can either let The Things Network generate a Device EUI or use the unique MAC address of the LoRa module on the LoPy MAC. This is how you get the MAC address:</p>

<ol>
  <li>
    <p><a href="https://docs.pycom.io/lopy/lopy/tutorial/repl.html">Start a MicroPython REPL prompt</a>, probably via <a href="https://docs.pycom.io/lopy/lopy/general.html#telnet-repl">Telnet</a>.</p>

    <blockquote>
      <p>If you don’t want to guess the USB port or IP address every time you want to connect to it, <a href="https://docs.pycom.io/lopy/lopy/tutorial/wlan.html">configure your LoPy with a static IP</a>.</p>
    </blockquote>
  </li>
  <li>
    <p>Run the following commands in the REPL:</p>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>from network import LoRa
import binascii
lora <span class="o">=</span> LoRa<span class="o">(</span><span class="nv">mode</span><span class="o">=</span>LoRa.LORAWAN<span class="o">)</span>
print<span class="o">(</span>binascii.hexlify<span class="o">(</span>lora.mac<span class="o">())</span>.upper<span class="o">()</span>.decode<span class="o">(</span><span class="s1">'utf-8'</span><span class="o">))</span>
</code></pre>
    </div>

    <p>This should print your Device EUI like:</p>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>70B3D5499585FCA1
</code></pre>
    </div>
  </li>
  <li>
    <p>Follow the steps to <a href="../../v2-preview/console/#register-device">register your device</a>.</p>
  </li>
</ol>

<h2 id="activate-your-device">Activate your Device</h2>

<p>Once you have registered your device you can now activate it via either OTAA or ABP. OTAA is the preferred method.</p>

<p>You’ll probably want to program your your device via <a href="https://www.pycom.io/solutions/pymakr/">Pymakr</a> or modify the <code class="highlighter-rouge">flash/main.py</code> file via <a href="https://docs.pycom.io/lopy/lopy/general.html#local-file-system-and-ftp-access">FTP</a> instead of using the REPL.</p>

<h3 id="otaa">OTAA</h3>

<p>Copy and paste your device’s <strong>Application EUI</strong> and <strong>Application Key</strong> from the The Things Network Console and use the following code to activate via OTAA:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">network</span> <span class="kn">import</span> <span class="n">LoRa</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">binascii</span>

<span class="n">lora</span> <span class="o">=</span> <span class="n">LoRa</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">LoRa</span><span class="o">.</span><span class="n">LORAWAN</span><span class="p">)</span>

<span class="n">app_eui</span> <span class="o">=</span> <span class="n">binascii</span><span class="o">.</span><span class="n">unhexlify</span><span class="p">(</span><span class="s">'0000000000000000'</span><span class="p">)</span>
<span class="n">app_key</span> <span class="o">=</span> <span class="n">binascii</span><span class="o">.</span><span class="n">unhexlify</span><span class="p">(</span><span class="s">'00000000000000000000000000000000'</span><span class="p">)</span>

<span class="n">lora</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">activation</span><span class="o">=</span><span class="n">LoRa</span><span class="o">.</span><span class="n">OTAA</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">app_eui</span><span class="p">,</span> <span class="n">app_key</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># wait until the module has joined the network</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">lora</span><span class="o">.</span><span class="n">has_joined</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Not joined yet...'</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">'Network joined!'</span><span class="p">)</span>
</code></pre>
</div>

<blockquote>
  <p>To monitor the logs, connect to the <a href="https://docs.pycom.io/lopy/lopy/general.html#telnet-repl">Telnet REPL</a>. This is also comes into use to to <a href="https://docs.pycom.io/lopy/lopy/tutorial/repl.html#resetting-the-board">soft-reboot</a> the board after modifying <code class="highlighter-rouge">main.py</code>. Simply press <code class="highlighter-rouge">CTRL+D</code> to interrupt the active script and <code class="highlighter-rouge">CTRL+D</code> to soft reboot.</p>
</blockquote>

<h3 id="abp">ABP</h3>

<p>Copy and paste your device’s <strong>Device Address</strong>, <strong>Network Session Key</strong> and <strong>Application Session Key</strong> from the The Things Network Console and use the following code to activate via ABP:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">network</span> <span class="kn">import</span> <span class="n">LoRa</span>
<span class="kn">import</span> <span class="nn">binascii</span>
<span class="kn">import</span> <span class="nn">struct</span>

<span class="n">lora</span> <span class="o">=</span> <span class="n">LoRa</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">LoRa</span><span class="o">.</span><span class="n">LORAWAN</span><span class="p">)</span>

<span class="n">dev_addr</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">"&gt;l"</span><span class="p">,</span> <span class="n">binascii</span><span class="o">.</span><span class="n">unhexlify</span><span class="p">(</span><span class="s">'00000000'</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">nwk_swkey</span> <span class="o">=</span> <span class="n">binascii</span><span class="o">.</span><span class="n">unhexlify</span><span class="p">(</span><span class="s">'00000000000000000000000000000000'</span><span class="p">)</span>
<span class="n">app_swkey</span> <span class="o">=</span> <span class="n">binascii</span><span class="o">.</span><span class="n">unhexlify</span><span class="p">(</span><span class="s">'00000000000000000000000000000000'</span><span class="p">)</span>

<span class="n">lora</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">activation</span><span class="o">=</span><span class="n">LoRa</span><span class="o">.</span><span class="n">ABP</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">dev_addr</span><span class="p">,</span> <span class="n">nwk_swkey</span><span class="p">,</span> <span class="n">app_swkey</span><span class="p">))</span>
</code></pre>
</div>

<h2 id="send-a-message">Send a Message</h2>

<p>After activation, you can send bytes over The Things Network like this:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">socket</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_LORA</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_RAW</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_LORA</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_DR</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">bytes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
</code></pre>
</div>

<p>Use socket options to configure the desired data rate. The minimum data rate supported is 0 and the maximum is 7. For instance:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>s.setsockopt(socket.SOL_LORA, socket.SO_DR, 0)
</code></pre>
</div>

<p>It’s also possible to configure the socket timeout or to make it blocking, e.g.:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>s.setblocking(True)   # Make the socket blocking, socket.send() won't return until completed
s.settimeout(3.5)     # Configure the timeout of the socket to 3.5 seconds
</code></pre>
</div>

<h2 id="receive-messages">Receive Messages</h2>

<p>After joining the network, create a LoRa socket, send a packet, and then try to receive:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_LORA</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_RAW</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_LORA</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_DR</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">bytes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span> <span class="c"># wait for the tx and rx to complete</span>
<span class="n">rx_pkt</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>   <span class="c"># get the packet received (if any)</span>
<span class="k">print</span><span class="p">(</span><span class="n">rx_pkt</span><span class="p">)</span>
</code></pre>
</div>

<p>Reception happens in the background automatically, therefore <code class="highlighter-rouge">s.recv(64)</code> will simply fecth data from the receive queue. If the receive queue is empty, the <code class="highlighter-rouge">recv</code> method will raise a <strong>OSError</strong> exception with an <strong>EAGAIN</strong> error code . Be careful when using blocking sockets, as in that case,<code class="highlighter-rouge">recv</code> will block indefinitely until something arrives (which might never happen if you are not able to send again…). The best is to set a sensible timeout value for the socket, for instance, after the network is joined:</p>

<div class="language-python highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_LORA</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_RAW</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_LORA</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_DR</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">bytes</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span> <span class="c"># configure a timeout value of 3 seconds</span>
<span class="k">try</span><span class="p">:</span>
   <span class="n">rx_pkt</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>   <span class="c"># get the packet received (if any)</span>
   <span class="k">print</span><span class="p">(</span><span class="n">rx_pkt</span><span class="p">)</span>
<span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'No packet received'</span><span class="p">)</span>
</code></pre>
</div>

<p>In the case above, if after 3 seconds there’s no packet received, the call to <code class="highlighter-rouge">s.recv(64)</code> will raise a timeout exception.</p>

          </div>
        </section>
      
        
        
        <section class="panel">
          <div class="panel-body">
            <h1 id="resources">Resources</h1>

<p>Official resources by Pycom:</p>

<ul>
  <li><a href="https://www.pycom.io/gettingstarted/">Getting Started with the LoPy</a></li>
  <li><a href="https://docs.pycom.io/lopy/">Documentation for MicroPython and the LoPy</a></li>
</ul>

<p>Resources for community support:</p>

<ul>
  <li><a href="https://www.thethingsnetwork.org/forum/search?q=lopy">The Things Network Forum / LoPy</a></li>
  <li><a href="https://forum.pycom.io/category/6/the-lopy">Pycom Forum / LoPy</a></li>
</ul>

          </div>
        </section>
      

    </div>

  </div>
</div>

<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>

    </div>

    <script src="/docs/assets/js/bundle.js"></script>
    <script src="https://www.thethingsnetwork.org/navbar.js"></script>
    <script src="https://ttnstaticfile.blob.core.windows.net/static/common/js/ga.js"></script>

  </body>
</html>
